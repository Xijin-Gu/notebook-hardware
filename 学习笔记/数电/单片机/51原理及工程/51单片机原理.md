最小系统：单片机，晶振电路，复位电路

集成中央处理器（CPU）、随机存储器（RAM）、只读存储器（ROM）、多种I/O口和中断系统、定时器/计数器等（可能包括显示驱动电路、脉宽调制电路、模拟多路转换器、A/D转换器等电路）

- 集成度高，体积小
- 开放性能好，周期短，控制功能强
- 低功耗、低电压，有掉电保护功能
- 通用性和灵活性好
- 具有良好的性价比

发展阶段：

1. SCM：单片微型计算机阶段（裸机），寻求最佳单片机形态的嵌入式系统体系结构。
2. MCU：微控制器阶段（外围电路组成主板），主要的技术方向是，不断推进在嵌入式系统中集成各种外围电路与接口电路的能力，以满足智能化控制的需求
3. SoC：片上系统（或系统级芯片）阶段，主要的技术方向是，寻求应用系统在芯片上的最大化解决方案，SoC是有一个有专用目标的集成电路，包含完整系统并有嵌入软件的全部内容。

51内部结构（SCM）：

- 中央处理器（CPU）
- 振荡器和时序OSC，时序相当于单片机的时序，有外部时序，内部时序一般不好
- 程序存储器ROM
- 数据存储器RAM/SFR
- 可编程I/O
- 中断源（内，外）INT
- 定时器/计数器T/C
- 可编程双工串行口UART
- 64KB总线扩展控制器（BUS）

**除了CPU以外的外围设备通过总线和CPU连接**

**CPU**：

- 控制器
  - 用途：统一指挥和控制个单元协调工作
  - 任务：从ROM中取出指令-译码-执行指令
  - 组成：
    - 程序计数器（PC）：指向下一条指令首地址，ROM存储单元的地址指针（引导程序运行），可修改，让程序跳转运行复位时：PC初值=0-复位后程序从0开始运行
    - 指令寄存器（IR）：8位寄存器，暂存指令，等待译码
    - 指令译码器（ID）：将指令寄存器的指令进行译码，转为可执行的电信号，再通过定时器电路将其执行
    - 数据指针寄存器（DPTR)：指向ROM或TAM存储单元的地址指针（引导数据传送）DPTR是专门为16位（或者小于16位）的外部RAM或者外部ROM准备用于读取和写入的
- 运算器
  - 累加器（ACC）：存放操作数或中间运算结果的寄存器，在CPU执行某种运算前，两个操作数中的一个通常应放在累加器A中，运算完成后累加器A中便可得到运算结果。
  - 算术逻辑单元（ALU）：它代表算术逻辑单元，执行算术和逻辑运算，可进行四则运算，操作数分别由暂存器1、2输入，运算结果发给状态字寄存器PSW
  - 状态字寄存器（PSW）：存放程序运行过程中各种状态信息的寄存器

存储结构：

- RAM和ROM统一编址（普林斯顿结构）
- RAM和ROM分别编址（哈佛结构）（单片机使用）

ROM掉电不丢失，RAM掉电丢失

内存为了定位，把每个空间都编上一个序号，内存编号的那个号码叫做地址，地址通常以十六进制的数字表示

存储器系统，给字节编号就叫字节地址，给二进制编号就叫位地址（一字节为八个二进制）

**RAM：**

- ①区为工作寄存器区，共有32个存储单元，每个单元有一个八位地址和一个寄存器名称（R0\~R7)，32个单元分为四组。CPU在一个时间，只能选一组工作寄存器组（由PSW的RS1和RS0标志位来控制选组，不设置的话默认位0组）。用来运算、控制电路各种情况，如定时器、中断系统等。
- ②区为位寻址区，共有16个存储单元，每个单元都有1个字节地址，8个不同的位地址，合计128个位地址，可以用字节地址和位地址两种方式存取数据。
- ③区为用户RAM区（堆栈、数据缓冲），共有80个存储单元，每个单元都有一个字节地址，但没有位地址，也没有寄存器名，可作为堆栈区和中间数据存储区使用

**①区和③区只能按字节进行数据操作，②区可以按字节和位两种方法存取操作**

- 高128字节的区域-特殊功能寄存器区-SFR承担着51单片机内部资源的管理工作

直接寻址：通过把地址定义一个名称以后，修改在该地址的内存空间的内容（语句如Sbit，Sfr)

单片机需要时钟信号才能正常运作，时钟信号是脉冲信号的一种，通过其他元器件综合起来形成

- 晶振时钟（通过外部晶振电路来获取时钟信号，电容用于起振）
- 脉冲时钟（外部从XTAL2引脚输入时钟信号）

部分单片机即使没有外部晶振也能正常工作（内部集成RC振荡电路）：

- 优点：降低成本
- 缺点：精度不行

时序是对象（引脚、事件、信息）间按照时间顺序组成的序列关系

时序图也成为波形图或序列图

时序要受时钟节拍的制约

时钟的度量单位：

时钟周期（或节拍）P、状态周期S、机器周期、指令周期

S=2P，机器周期=6S=12P，一个指令周期=1\~4个机器周期

复位电路的首要功能是通电复位，使单片机恢复原始默认状态。

复位条件：在RST/VPD引脚端出现：≥10ms时间的高电平（≥3V）

- 上电复位
- 按键复位
- 复合复位

电控开关：

- 三极管
- MOS管

一般情况下用mos管

触发器-具有记忆存储功能，由门电路组成

51单片机有32只I/O口引脚，分属于四个端口。

- 可作为并行I/O输入通道（例如按键/开关连接通道）
- 可作为并行I/O输出通道（例如数码管显示器连接通道）
- 可作为串行通信通道（例如双机通讯的连接通道）
- 可作为外部设备的连接通道（例如存储器扩展通道）

4个端口内部结构也不同

- P1：8个相同结构电路，组成P1特殊功能寄存器。

  - P1.n = 1个锁存器+1个场效应管驱动器V+2给三态门缓冲器
  - 已有上拉电阻
  - 三种方式
    - 输出方式
    - 读引脚方式时，要将MOS管截止
    - 读锁存器方式，读-改-写类指令

  ![1663552222586](G:\typoraimg\img\1663552222586.png)

- P3：8个相同结构电路
  - P3.n = 1个锁存器+1给场效应驱动器V+2个三态门缓冲器+1个与非门
  - 比P1口多了一个与非门且与非门一端接在Q输出端上
  - 通用I/O，当第二输出功能置1时，那么与非门相当于非门，及P3和P1功能一样（自动置位）
  - 第二输出功能，当锁存器端置1时，与非门相当于非门。
  - 第二输入功能，当锁存器端置1时，再把第二输出功能引脚置1，那么与非门输出低电平，P3引脚输入则走第二输入功能引脚

![1663552944468](G:\typoraimg\img\1663552944468.png)

- P0 = 1个锁存器+2个三态门暂缓其+1个场效应管V2+两路开关+非门
  - 系统会将控制端置0，两路开关打到锁存器端，而V2连接的与门一端由控制端输入，所以一直高阻态，因此当作输出时需要自行接上拉电阻。数据输入时，CPU自动使地址/数据段为1，控制端为0，故分时复用方式为无条件的真双向口
  - 地址/数据输出的条件：控制端置1
  - 地址/数据输出时V1和V2交替导通，无需外接上拉电阻
  - 还用作外部地址总线（16位地址总线的低8位）

![1663833537494](G:\typoraimg\img\1663833537494.png)

**利用Proteus和keil进行仿真**























