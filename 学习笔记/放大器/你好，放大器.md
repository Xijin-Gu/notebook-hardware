

# 放大器定义、分类和选择使用

## 放大器定义

**电学中能够实现信号、功率放大的器件，称为放大器，英文为Amplifier。一放大器为核心，能够实现放大功能的电路组合，称为放大电路。**

放大器是一个器件，device；放大电路是这些器件加上电容电阻、线路板或者导线焊接到仪器，是一个组合。

## 放大器分类

**全部放大器被分为三种：晶体管放大器、运算放大器和功能放大器**

*还存在电子管放大器*

![image-20220608142707888](G:\typoraimg\img\image-20220608142707888.png)





### 晶体管

晶体管分为两类：双极型晶体管（Bipolar Junction Transisitor-BJT,分为NPN型，PNP型）、单极型晶体管（也称场效应管，Field Effect Transistor-FET)。其中场效应管还分为JFET和MOSFET，就是结型管和金属氧化物管，它们都有N沟道和P沟道之分。从符号看，晶体管可以化成八种，双极型2种，单极型6种。

所谓**双极型晶体管**，是指这种集体管内部既有电子运动产生电流，也有空穴运动形成电流，一个多，称多子，一个少，称少子，两者的运动方向相反，飞向两个不同的“极”。

所谓**单极型晶体管**中，只有空穴或者只有电子运动形成电流，只有多子存在，飞向单一的极。

**晶体管**可以组成常见的共射（源）极，共基（栅）极，共集电（漏）放大电路。以及典型多变的多级放大电路。

*复杂的电路限制了这种放大电路的推广*

### 运算放大器

运算放大器又称运放，其实就是一个差分输入、多级、直接耦合、高增益放大电路（通常大于10000倍），用集成电路工艺生产在一个单芯片集成电路中。它有两个差分输入端，一个或者两个输出端，两个供电电源端。

!![image-20220608142823330](G:\typoraimg\img\image-20220608142823330.png)

**开环电路一般不用，因为开环增益太大**

![image-20220608142840676](G:\typoraimg\img\image-20220608142840676.png)

A~uf~称为闭环增益。当A~uo~很大时：

![image-20220608142847629](G:\typoraimg\img\image-20220608142847629.png)

**”虚短“不是运放本身的特性，而是深度负反馈导致的必然结果**

A~uo~越大，虚短现象越明显。

- 闭环电压增益约为1+R~F~/R~2~
- 输入阻抗等于R~1~
- 输出阻抗等于R~0~

#### 全差分运放

全差分运放有差分输入脚，差分输出脚。此外还有一个输入脚

![image-20220608143232433](G:\typoraimg\img\image-20220608143232433.png)

![image-20220608143256514](G:\typoraimg\img\image-20220608143256514.png)

### 功能放大器

![image-20220608143348384](G:\typoraimg\img\image-20220608143348384.png)

进一步集成的放大器。

#### 仪表放大器

高阻差分输入，输出有单端的，也有差分的，增益一般可以用一个外部电阻，由用户选择设定。常用于仪器仪表的最前端，和传感器直接接触。

仪表放大器内部通常具有2个或者更多的运放，最典型的是3运放结构。其它的还有2运放结构、电流镜结构、飞电容结构等。

仪表放大器具有极高的共模抑制比——对信号的差值极为敏感而对共模量不敏感，还有极高的输入阻抗。但是它的输入管脚有工作限制：第一不得悬空，第二不能承载太高的电压。

![image-20220608144024520](G:\typoraimg\img\image-20220608144024520.png)

#### 差动放大器

有一个运放和若干个激光校准电阻对集成在一起的电路，而其中的电阻值选择均以容易形成差动放大器为目的。

![image-20220608144309078](G:\typoraimg\img\image-20220608144309078.png)

程控增益放大器

放大器的增益可以由用户通过数字信号实施设定，因此叫Programmable，可程控。通常缩写为PGA或者DVGA。

程控增益放大器的增益设定，有多个管脚配合设定2进制增益的，也有通过数字通信接口给放大器写入命令的。

主要用于被测信号幅度变化较大且不可事先预知的情况：程控增益放大器的输出经过ADC进入处理器中，处理器分析所得数据，如果发现信号变化范围太小，可以发出指令，用程序增大PGA的增益，如果信号变化范围过大，可以用程序实现增益的所见，最终使得放大器处于随时可调的最佳增益状态。

![image-20220608144542739](G:\typoraimg\img\image-20220608144542739.png)

#### 压控增益放大器

放大器的增益由外部施加的电压V~G~连续控制。VGA。由dB线性和V/V线性两种。有的是正控制——V~G~越大，增益越大；有的是负控制。

其中一个主要应用是自动增益控制AGC。有些芯片为此还内嵌了输出有效值检测环节，以直流电压表征输出幅度，此电压如果回送到负控制的压控增益放大器的V~G~脚，可以方便实现AGC功能——输入幅度大范围改变时，输出幅度几乎不变。录音笔中一般都具备这种功能：距离说话者无论远近，录下的声音大小几乎是一致的。

**db线性**：以dB为单位的放大器增益，与控制电压V~G~成线性关系。

**V/V线性**：电压增益，与控制电压V~G~成线性关系。

![image-20220608144553673](G:\typoraimg\img\image-20220608144553673.png)

#### 隔离放大器

实现放大器输入信号与输出信号之间的电气隔离。实现方法有三类：变压器型、光电耦合器型、电容器型。ADI的产品主要是变压器型。

![image-20220608144616947](G:\typoraimg\img\image-20220608144616947.png)

## 选择放大器的原则

定义晶体管放大器为最低级，功能放大器为最高级。

如果要实现某个放大电路，如果高级放大器能够实现，那么低级放大器也一定能够实现。

可以遵循：

- 没有一成不变的原则，所有选择都是因时而异、因事而异。
- 一般情况下，多数人选择的，或者大的芯片生产商提供的选择，是正确的。收集各大芯片生产商的应用手册、实验室电路，以及数据手册中给出的应用实例。
- 一般情况下，如果能够采用合适的高级放大器，就不要用低级放大器。

# 运算放大器的关键指标详解

## 输入失调电压（Offset Voltage,Vos)

**在运放开环使用时，加载在两个输入端之间的直流电压使得放大器直流输出电压为0.也可定义为当运放接成跟随器且正输入端接地时，输出存在的非0电压。**

**优劣范围：1uV以下属于极优秀，100uV以下属于较好的，最大的有几十mV。**

任何一个放大器，无论开环连接或者反馈连接，当两个输入端都接地时，理论上输出应该为0，但运放内部两输入支路无法做到完全平衡，导致输出永远不会是0.此时保持放大器反向输入端不变，在同相输入端施加一个可调的直流电压，调节它知道输出直流电压变为0V，此时正输入端施加的电压的负值即为输入失调电压，用VOS表示。多数情况下，输入失调电压厂家会以绝对值表示。

任何一个实际运放都可理解为同相端串联了一个VOS，然后进入一个理想运放。

![image-20220608144717335](G:\typoraimg\img\image-20220608144717335.png)

当一个放大器被设计成A~F~倍闭环电压增益（同相输入放大增益，也称噪声增益时），如果放大器的失调电压为V~OS~，则放大电路0输入时，输出存在一个等于A~F~B~OS~的直流电平，此输出被称为输出失调电压。闭环增益越大，则**输出失调电压**也越大。

**对策**：如果被测信号包含直流量且关心这个直流量，就必须选择V~OS~远小于被测直流量的放大器，或者通过运放的调零措施消除这个影响。如果仅关心被测信号中的交变成分，可以在输入端和输出端增加交流耦合电路，将其消除。

调零方法：有些运放有两个条令段，按照数据手册提供的方法接电位器调零即可。对没有调零端的运放，可采用外部的输出调零或者输入调零，有标准电路可以参考。

## 失调电压漂移（Offset Voltage Drift)

**当温度变化、时间连续、供电电压等自变量变化时，输入失调电压会发生变化。输入失调电压随自变量变化的比值，称为失调电压漂移**

有三种漂移量存在：

- 输入失调电压变化相对于温度变化的比值。是指定温度范围内的平均值，以uV/°C为单位。用符号ΔV~OS~/ΔT或者dV~OS~/dT表示。
- 相对于时间的比值，以uV/MO为单位，含义是每月变化多少微伏
- 相对于电源电压变化的比值，以uV/V为单位，含义是调好的放大器，当电源电压发生1V变化，会引起失调电压的变化。（此数值在很多放大器数据手册中没有体现）

*优劣范围：0.002uV/°C到即使uV/°C。*

失调电压漂移量，与数据手册上标注的失调电压（或称之为初始失调电压）本身有密切关系。初始失调电压小的，其漂移量也小。从多种放大器指标看，有以下规律：

- 温度变化40\~500度可能带来的失调电压变化，等同于初始失调电压。
- 10\~100个月带来的失调电压变化，等同于初始失调电压。

衡量失调电压漂移量，最好能和初始失调电压进行对比。指标偏移量等效温度T~OD~，偏移量等效时间，表示了带来一个新的失调电压需要变化的时间和温度值。

因为不能被调零端调零，即便调零完成，它还会带来新的失调。在高精度、高稳定性要求的场合，选择漂移系数较小的放大器，比失调电压大小更为重要。

- 选择高稳定性，也就是漂移系数较小的运放。
- 有些运放具有自归零技术，它能不断地测量失调并在处理信号过程中把当前失调电压减掉。这就可以一直新的失调。但是这种运放内部都有高频地切换动作，会产生该频率噪声。

## 输入偏置电流（Input bias current，I~B~）

**当输出维持在规定的电平时，两个输入端流进电流的平均值**

**优劣范围：60fA\~100uA。数量级相差巨大，这取决于运放输入端结构，FET输入的会很小。**

运放的两个输入端并不是绝对高阻，该指标主要描述输入端刘瑾电流的数量级。

![image-20220608145445519](G:\typoraimg\img\image-20220608145445519.png)

- 当用放大器接成跨阻放大测量外部微小电流时，过大的输入偏置电流会分掉被测电流，使测量失准。
- 当放大器输入端通过一个电阻接地时，这个电流将会在电阻上产生不期望的输入电压。

为了避免输入偏置电流对放大电路的影响，最主要的措施是选择I~B~较小的放大器。有很多FET输入运放可以实现这个要求。

但是，高速运放且I~B~较小的运放比较少。

## 输入失调电流（Input offset current，I~OS~)

**当维持在规定的电平时，两个输入端流进电流的差值**

**优劣范围：20fA~100uA。数量级相差巨大，取决于运放输入端结构，FET输入的会很小**

数值的大小一般和芯片的偏置电流相当。

失调电流的存在，说明两个输入端客观存在的电流有差异，后面讲要所述的，用外部电阻是实现匹配抵消偏置电流影响的措施，在此就失效了。

## 关于失调和偏置的总结

涉及到三个关键指标，输入电压V~OS~、输入偏置电流I~B~、输入失调电流I~OS~。理论上都应该为0，实际上都不为0，影响放大器的正常工作。

- 在放大器0输入电压时，导致输出不为0，这来自输入失调电压，以及某些情况下偏置电流和失调电流。
- 在电流检测时，影响检测精度，这主要来自于输入偏置电流。

### 输入时怎么计算放大器的实际输出

放大电路的输入电压为0时，导致输出不为0的原因一般有三个，输入失调电压，输入偏置电流，输入失调电流。

![image-20220608145951305](G:\typoraimg\img\image-20220608145951305.png)

G~N~称为噪声增益，在噪声计算、输出失调计算中应用很广泛。

![image-20220608150116976](G:\typoraimg\img\image-20220608150116976.png)

- 外部电阻雨打，电流引起的输出失调越明显。尽管某些运放输入偏置电流很小，只要外部电阻足够大，电流引起的输出失调越明显。

### 易受影响的电路

失调电压和偏置电流以一种直流形式存在，最终结果是在运放的输出端出现不该有的直流分量，简称它们为直流意外。

- 在多数交流耦合电路中，无需考虑这些直流意外的存在。
- 单级增益较大的交流耦合电路，需要注意直流意外会降低输出端的动态范围。
- 在直流耦合电路中，特别是对支流精度要求较高的电路中——比如电子秤，需要格外注意这些意外。

![image-20220608151424335](G:\typoraimg\img\image-20220608151424335.png)





**因此，面对输入偏置电流较大的运放，谨慎选择外部电阻是非常重要的。**

### 如何克服它们的影响

- 选择合适的运放。

​			多数情况下，遇到的问题都会有一款合适的运放。

- 选择合适的外部电阻，外部电阻对电路性能的影响可以分为两种

- - 选择最小的电阻以降低电流对直流意外的贡献。

  - 第二，调配电阻值以抵消直流意外。

  - 调零和控温

    ​	**这是无奈的方法**。很多运放具有调零管脚，可供用户通过电位器或者调配电阻实施调零。也有很多运放不具备这个管脚，可以采用外部增加电路实现调零，可以输入端调零，也可以输出端调零。**很多数据手册上给出了芯片的调零方法**

    存在问题：

    - 在某些温度下实现的调零，当温度变化后，它又不是零了。或者过了几年，时漂发挥了作用了。
    - 手工调零不适合于大规模生产。
    - 电位器存在于电路中是一个可靠性隐患。

![image-20220608151944241](G:\typoraimg\img\image-20220608151944241.png)

- 高速运放电路特别是电流反馈型运放，其外部电阻选择最好遵循数据手册建议，一般都比较小，1kΩ以下。是在找不到的情况下，以尽量减小电阻为宜。
- 外部电阻越大，则工作时消耗功率越小，发热也越轻，对运放输出电流的要求也越低。这是在多种选择中选择大电阻的唯一理由。（流压转换电路中，面对微弱电流必须选择很大的电阻，不属此类。）
- 外部电阻越大，则运放偏置电流对输出失调的贡献越大。
- 外部电阻越大，则电阻本身产生的噪声越大。常温下，电阻的噪声密度可以用0.13sqrt(R)nV/Hz。
- 外部电阻越大附近的杂散电容越不可忽视，它通常会导致上限截止频率降低。
- 外部电阻越大，则电路板造成的漏电阻越不可忽视。
- 电阻选择，一般没有唯一的结论。

## 噪声指标（Noise)

一个正常工作的放大电路，当输入端接地时，用示波器观察输出，看到的可能不是平直的直线，而是在一定幅度之内的杂乱无章的波形。这就是噪声。示波器上看到线越粗，就说明噪声幅度越大。

放大电路的输出端噪声，小至uV以下，大至百mV以上，完全取决于电路设计，能否在示波器上看见，则取决于示波器选择和设置。

![image-20220608151958340](G:\typoraimg\img\image-20220608151958340.png)

噪声的数学定义、产生机理有大量理论。使用以下特性约束：

- 它的波形在任意时刻都是不确定的，因此它是广谱的，有低频也有高频。
- 它的幅度又是有限制的，这与数学上的高斯分布近似但不完全一致。
- 它具有无限积分趋零性。

运放组成的放大电路在正常工作时，其输出必然包含具有确定有效值的噪声。有的电路输出噪声大，有的很小，这取决于器件的选择、电路的设计，以及环境。对一个给定的电路以及确定的环境其输出噪声的大小是可以计算的。

### 初识噪声

![image-20220608152210499](G:\typoraimg\img\image-20220608152210499.png)

![image-20220608152219507](G:\typoraimg\img\image-20220608152219507.png)

![image-20220608152228523](G:\typoraimg\img\image-20220608152228523.png)

### 怎么衡量噪声的大小

#### 有效值

![image-20220608152428330](G:\typoraimg\img\image-20220608152428330.png)

**独立信号的电能力具有可加性**

对噪声在频率上的分布取密度得到电能力密度

![image-20220608152851533](G:\typoraimg\img\image-20220608152851533.png)

![image-20220608153105718](G:\typoraimg\img\image-20220608153105718.png)



![image-20220608153127232](G:\typoraimg\img\image-20220608153127232.png)

### 最简单的运放的噪声模型

运放组成的放大电路，输出噪声计算非常复杂，它与运放电路结构有关，还与外部电阻大小有关，并且运放内部还具有多个噪声源，有电压的，还有电流的。

运放内部存在多种噪声源，最重要的一个是**等效输入电压噪声源**

运放的正输入端存在一个噪声电压源,称为等效输入噪声，用U~N_I~表示。用电压有效值表示其大小。

![image-20220608153145822](G:\typoraimg\img\image-20220608153145822.png)



要计算等效输入噪声，首先要知道这个噪声源的噪声电能力密度，然后将它们在一定频段进行积分，就能得到噪声源的电能力，对其开根号，就得到了噪声有效值。

因此运放的噪声电能力密度曲线是很重要的。

### U~N_I~的噪声密度及噪声有效值计算

要了解运放等效输入噪声的电能力密度曲线，需要先了解产生噪声的根源。

每个噪声源都可能由多种噪声根源合并生成，电学系统中，产生噪声的根源很多，像热噪声、散粒噪声等。不同噪声根源具有不同的电能力密度曲线。

运放常见的噪声根源有两类，一类位1/f噪声，其电能力密度曲线随着频率的上升而下降；一类为白噪声，或者叫平坦噪声，其电能力密度曲线是一条直线，与频率无关。这两种噪声根源，都是数学上可积分的简单函数。

有时候在100MHz以上还存在一种分配噪声。

![image-20220608153430138](G:\typoraimg\img\image-20220608153430138.png)

这两种图是同源冗余的。

#### 1/f噪声密度和噪声有效值的计算

![image-20220608153520343](G:\typoraimg\img\image-20220608153520343.png)

#### 白噪声及噪声有效值计算

![image-20220608153600230](G:\typoraimg\img\image-20220608153600230.png)

#### 总噪声密度和总有效值计算

![image-20220608153627710](G:\typoraimg\img\image-20220608153627710.png)

#### 从噪声电压密度曲线中获得C和K

数据手册中，只有总的噪声电压密度曲线。如：

![image-20220608153638643](G:\typoraimg\img\image-20220608153638643.png)

厂家一般仅给出了包含1/f噪声和平坦区噪声的噪声电压密度曲线，特征：低频段以1/f噪声为主，且随着频率的上升而下降，渐渐的，1/f噪声没有了，呈现出平坦区噪声。

问题是，厂家的图中并没有区分C和K的概念。

![image-20220608153805005](G:\typoraimg\img\image-20220608153805005.png)

#### K的确定

K是指电压密度曲线中白燥声电压密度。两种方法可以获得K。

- 读图法：频率越高，1/f噪声影响越小，电压密度中就仅包含白噪声的K了。找到途中最高频率点，直接读数值即可。
- 数据法：多数数据手册会在指标表里以e~n~为标示出来。

![image-20220608153841085](G:\typoraimg\img\image-20220608153841085.png)

#### C的确定

C是指1/f噪声在1Hz的噪声电压密度。多数情况下，需要从噪声电压密度曲线图中间接获得。

- 曲线涵盖1Hz

如果电压密度曲线中1Hz处的值是可以读到的，那么她说1/f噪声和白噪声的合并。

![image-20220608153917881](G:\typoraimg\img\image-20220608153917881.png)

- 曲线不涵盖1Hz

某些数据手册，特别是告诉运放，其电压密度曲线并未涵盖1Hz，也就读不到Du(1Hz)。

可以找到途中最小的频率f~min~。有：

![image-20220608154009372](G:\typoraimg\img\image-20220608154009372.png)

**实际的运放噪声密度曲线，不是简单用1/f噪声和白噪声合并就可以准确的到，最终还得依赖于实测结果。**

**多数情况下，1/f噪声的影响力远小于白噪声**

- 从转角频率获得

有些数据手册会明确给出噪声转角频率，称之为f~comer~，定义为此频率出1/f噪声和白噪声的电压密度相等。

![image-20220608154034994](G:\typoraimg\img\image-20220608154034994.png)

### 噪声计算中频率的起点和重点

#### 终点：等效带宽f~b~

获知C，K就可以计算出噪声有效值。

其中关键是两个频率点fa和fb的确定。对白噪声来说，重要的是fb。

白噪声是广谱的，fb通常远大于fa，因此

![image-20220608154204650](G:\typoraimg\img\image-20220608154204650.png)

理论上说，噪声的发作频率是没有上线的，实际中，任何一个噪声发作源，在输出时都会收到外部影响而编程“上有限”。

- 运放正输入端产生的等效输入噪声UN_1，在运放输出端会收到运放带宽的限制，而呈现出低通滤波效果。
- 电阻产生的噪声，会收到输出端与地之间的杂散电容影响，也构成了一个低通滤波器，比如一个10kΩ电阻一端接地，另一端会出现噪声，这个噪声在倍探测之前其实已经被低通滤波了，滤波电容就是杂散电容，假设为1pf，上线就是1/2ΠRC
- 即使没有任何时间常数，只要用示波器观察一个客观存在的噪声源，示波器也有上限截止频率fh，也会把更高频率的噪声滤除掉。

这就相当于给电压密度曲线串联了一个上限截止频率为fh的低通滤波器，或者说给它串联了一个上限截止频率为fb的理想低通滤波器——导致电能力密度或者电压密度曲线在超过fb后立即变为0，积分上限就不再是无穷大而是fb。

![image-20220608154503403](G:\typoraimg\img\image-20220608154503403.png)

**低通滤波器截止频率fh**与等效的**理想滤波器截止频率fb**，也就是**等效带宽的关系**

![image-20220608154536848](G:\typoraimg\img\image-20220608154536848.png)

#### 一阶低通等效带宽的推导

![image-20220608154645854](G:\typoraimg\img\image-20220608154645854.png)

#### 起点频率fa

1/f噪声计算中，如果已知C，那么同样涉及到两个频率的选取。

虽然噪声是广谱的，最低频率fa可以是0Hz.但是求1/f的有效电压不能让fa=0。

![image-20220608154714207](G:\typoraimg\img\image-20220608154714207.png)

工程上认为，当噪声频率低于0.1Hz，即10s以上发作一次的实践事件，一般可以被认为是人为的、环境因素带来的扰动，比如在电路旁边走动引起的气流变化，可能与运放电路本身无关。

绝大情况下，计算1/f的噪声，fa选为0.1Hz。

### 噪声的有效值和峰峰值的关系

在示波器上，看到的噪声是一个混乱无比的波形，用肉眼得出其有效值是及其困难的。幸运的是，我们能通过肉眼观察到噪声波形的峰峰值。

![image-20220608154917714](G:\typoraimg\img\image-20220608154917714.png)

定义信号的峰值与信号的有效值的比值为峰值因数，那么白噪声的峰值因数为3.3。这来源于白噪声在纵轴上的分布满足正态分布。（对于1/f噪声，其峰值因数有不同的说法，一般可以认定也近似为3.3）

![image-20220608154928018](G:\typoraimg\img\image-20220608154928018.png)

### op27噪声计算实例

op27是一款经典的高性能运放，低噪、低失调，稳定性很好。

![image-20220608154953686](G:\typoraimg\img\image-20220608154953686.png)

![image-20220608155129074](G:\typoraimg\img\image-20220608155129074.png)



### 完整运放电路的噪声计算

运放输出端的噪声，还包括各个电阻产生的噪声，电流源产生的噪声等。

![image-20220608155312347](G:\typoraimg\img\image-20220608155312347.png)

![image-20220608155333877](G:\typoraimg\img\image-20220608155333877.png)

![image-20220608155424215](G:\typoraimg\img\image-20220608155424215.png)

![image-20220608155438401](G:\typoraimg\img\image-20220608155438401.png)

![image-20220608155603018](G:\typoraimg\img\image-20220608155603018.png)

### 多级放大电路的噪声计算

![image-20220608155707479](G:\typoraimg\img\image-20220608155707479.png)

### 噪声计算总结

![image-20220608155727600](G:\typoraimg\img\image-20220608155727600.png)

### 噪声计算中的一些问题

![image-20220608155748908](G:\typoraimg\img\image-20220608155748908.png)

#### 降低输出噪声的方法

![image-20220608155803636](G:\typoraimg\img\image-20220608155803636.png)

#### 滤波和放大

![image-20220608155950333](G:\typoraimg\img\image-20220608155950333.png)

#### 低噪声设计中的技巧

![image-20220608160122541](G:\typoraimg\img\image-20220608160122541.png)

## 输入电压范围（Input Voltage)

**保证运算放大器正常工作的最大输入电压，也称为共模输入电压范围**

**优劣评定：**一般运放的输入电压范围比电源电压范围窄1V到几V，比如±15V供电，输入电压范围是-12V\~13V.较好的运放输入电压范围和电源电压范围相同，甚至超出范围0.1V.这能提高电路的适配性。

当运放最大输入电压范围与电源范围比较近时，比如相差0.1V甚至更少，都可以叫“**输入轨到轨**”，表示为Rail-to-rail input，或RRI。

**运放的两个输入端，任何一个输入电压超过了此范围，都将引起运放的失效。**

之所以叫共模输入电压范围，是因为运放正常工作时，两个输入端的差压式很小的。

## 输出电压范围（VOH/VOL/Swing from rail)

**在给定电源电压和复杂情况下，输出能够达到的最大电压范围。或者给出正向最大电压VOH以及最小电压VOL——相对于给定的电源电压和负载；或者给出与电源轨的差距**

**优劣范围：**一般运放的输出电压范围要比电源范围窄1V到几V。较好的运放输出电压范围可以与电源电压范围非常接近，比如几十mV的差异，这称为“**输出至轨电压**”。这在低电压供电场合非常有用，当厂家觉得这个运放的输出范围已经接近于电源电压范围时，就自称“输出轨至轨”，表示Rail-to-rail output,或RRO。

**在没有额外的储能元件的情况下，运放的输出电压不可能超过电源电压范围，随着负载的加重，输出最大值与电源电压的差异会越大。这需要看数据手册中的附图。**

- 正至轨电压与负至轨电压的绝对值可能不一致，但一般情况下数量级相同。
- 至轨电压与负载密切相关，负载越重（阻抗小）至轨电压越大
- 至轨电压与信号频率相关，频率越高，至轨电压越大，甚至会突然大幅度下降
- 至轨电压在20mV以内，属于非常优秀

## 共模抑制比（Common-mode rejection ratio,CMRR)

**差模电压增益与共模电压增益的比值用dB表示**

![image-20220608160500666](G:\typoraimg\img\image-20220608160500666.png)

**优劣范围：**一般运放都有60dB以上的CMRR，高级的可达140dB.

运放在单端输入时，不存在这个概念。只有把运放接成类似于减法器形式，使得运放电路具备两个可变的输出端时，此指标才会发挥作用。

![image-20220601170111498](https://osmanmd.oss-cn-chengdu.aliyuncs.com/image-20220601170111498.png)

![image-20220601170125430](https://osmanmd.oss-cn-chengdu.aliyuncs.com/image-20220601170125430.png)

![image-20220601170856014](https://osmanmd.oss-cn-chengdu.aliyuncs.com/image-20220601170856014.png)

## 开环电压增益(Open-loop gain,Avo)

**运放本身具备的输出电压与两个输入端差压的比值，用dB表示**

**优劣范围：**一般在60dB\~160dB之间，越大的，说明其放大能力越强。

开环电压增益是指放大器在闭环工作时，实际输出除以运放正负输入端之间的压差类似于运放开环工作（运放是不能开环工作的）

Avo随频率升高而降低，通常从运放内部第一个极点开始，其增益就以-20dB/10倍频的速率开始下降，第二个极点开始加速下降。

![image-20220601171308276](https://osmanmd.oss-cn-chengdu.aliyuncs.com/image-20220601171308276.png)

一般来说，说某个运放的开环增益，是指其低频最高增益。多数情况下，很少关注这个指标，而要关注它的下降规律，即**单位增益带宽**，或者**增益带宽积**

在特殊应用中，比如高精密测量、低失真度测量中需要注意此指标。在某个频率处实际的开环增益将决定放大器的实际放大倍数与设计放大倍数的误差，也将决定放大器对自身失真的抑制，还将影像输出电阻等。

## 压摆率（Slew rate, SR）

**闭环放大器输出电压变化的最快速率，用V/us表示**

**优劣范围：**从2mV/us到9000V/us不等

该值显示运放正常工作时，输出端所能提供的最大变化速率，当输出信号想要实现比这个速率还快的变化时，运放就不能提供了，导致输出波形变形——原本是正弦波就变成了三角波。

对一个正弦波来说，其最大变化速率发生在过零点处，且与输出信号幅度、频率有关。设输出正弦波幅度为Am，频率为fout，过零点变化为Dv，则：

![image-20220601171917188](https://osmanmd.oss-cn-chengdu.aliyuncs.com/image-20220601171917188.png)

![image-20220601171931328](https://osmanmd.oss-cn-chengdu.aliyuncs.com/image-20220601171931328.png)

![image-20220601171946636](https://osmanmd.oss-cn-chengdu.aliyuncs.com/image-20220601171946636.png)

## 带宽指标

与带宽相关的指标有四项

- 单位增益带宽（Unity Gain-bandwidth,UGBW）——f1
- 增益带宽积（Gain Bandwidth Product,GBP或者GBW）——f2
- -3dB带宽——f3
- 满功率带宽（Full Power Bandwidth)——f0

![image-20220601172222785](https://osmanmd.oss-cn-chengdu.aliyuncs.com/image-20220601172222785.png)

![image-20220601172243631](https://osmanmd.oss-cn-chengdu.aliyuncs.com/image-20220601172243631.png)

![image-20220601172408372](https://osmanmd.oss-cn-chengdu.aliyuncs.com/image-20220601172408372.png)

![image-20220601172820144](https://osmanmd.oss-cn-chengdu.aliyuncs.com/image-20220601172820144.png)

![image-20220601173051585](https://osmanmd.oss-cn-chengdu.aliyuncs.com/image-20220601173051585.png)

![image-20220601173107499](https://osmanmd.oss-cn-chengdu.aliyuncs.com/image-20220601173107499.png)

## 建立时间（Settling Time)

**运放接成指定增益（一般为1），从输入阶跃信号开始，到输出完全进入指定误差范围所需要的时间。所谓的指定误差范围，一般有1%，0.1%几种**

**优劣范围：**几ns到几ms。

建立时间有三部分组成，

- 运放的延迟
- 压摆率带来的爬坡时间
- 稳定时间

与SR密切相关

**对运放组成的ADC驱动电路，建立时间是一个重要指标**

![image-20220601174855000](https://osmanmd.oss-cn-chengdu.aliyuncs.com/image-20220601174855000.png)

## 相位裕度（Phase margin）和增益裕度

**相位裕度：**在运放开环增益和开环相移图中，当运放的开环增益下降到1时，开环相移值减去-180°得到的数值

**增益裕度：**在运动开环增益和开环相移图中，当运放的开环相移下降到-180°时，增益dB值取负，或者是增益值的倒数

相位裕度和增益裕度越大，说明放大器越容易稳定。

![image-20220601175642661](https://osmanmd.oss-cn-chengdu.aliyuncs.com/image-20220601175642661.png)

![image-20220601175806024](https://osmanmd.oss-cn-chengdu.aliyuncs.com/image-20220601175806024.png)

## 电源电压抑制比（PSRR-Power Supply Rejection Ratio)

理论上，当电源电压发生改变时，运放构成的放大电路输出不应该变化。但实际上会变化——放大电路的噪声增益越大，由此带来的输出的变化量也越大。电源电压抑制比是一个与电路增益无关的指标。

**双电源供电电路中 ，保持负电源电压不变，输入不变，而让正电源产生变化幅度为ΔVs，频率为f的波动，那么在输出端会产生变化幅度为ΔVout，频率为f的波动。这等效于电源稳定不变情况下，在入端施加了一个变化幅度为ΔVin，频率为f的波动。则：**

![image-20220601180326235](https://osmanmd.oss-cn-chengdu.aliyuncs.com/image-20220601180326235.png)

![image-20220601180652061](https://osmanmd.oss-cn-chengdu.aliyuncs.com/image-20220601180652061.png)

![image-20220601180701578](https://osmanmd.oss-cn-chengdu.aliyuncs.com/image-20220601180701578.png)

![image-20220601180757754](https://osmanmd.oss-cn-chengdu.aliyuncs.com/image-20220601180757754.png)

![image-20220601180805007](https://osmanmd.oss-cn-chengdu.aliyuncs.com/image-20220601180805007.png)

## 全谐波失真加噪声THE+Noise

**全谐波失真本身是一个衡量一个时域波形与标准正弦波的差异程度的量，其原始定义为：时域波形中包含基波分量有效值U1RMS，以及各次谐波分量，则：**

![image-20220601180935581](https://osmanmd.oss-cn-chengdu.aliyuncs.com/image-20220601180935581.png)

![image-20220601180948323](https://osmanmd.oss-cn-chengdu.aliyuncs.com/image-20220601180948323.png)

![image-20220601181012446](https://osmanmd.oss-cn-chengdu.aliyuncs.com/image-20220601181012446.png)

该指标也被用于衡量一个放大器的保真程度——输出是否产生了相对于输入的失真，方法是：让放大器组成指定增益的放大电路，在输入端施加一个标准正弦波（尽量很小的失真度，取决于测量要求，选用不同等级的设备），测量输出波形的失真度，即为放大器的失真度。

![image-20220601181221215](https://osmanmd.oss-cn-chengdu.aliyuncs.com/image-20220601181221215.png)

## 热阻（Thermal resstanse,θJA)和温度范围

**热阻标准定义：是导热体组织热量散失程度的描述，以1W发热源在导热路径两端形成的温度差表示，单位为°C/W。有以下常用的两种**

![image-20220601181738245](https://osmanmd.oss-cn-chengdu.aliyuncs.com/image-20220601181738245.png)

对芯片来说，导热路径的两端分别为自身发热体与环境空气。热阻越大，说明散热越困难，其温差也就越大。

![image-20220601181904131](https://osmanmd.oss-cn-chengdu.aliyuncs.com/image-20220601181904131.png)

**当结温超过了最高容许结温（一般就是芯片中声明的存储温度，比如150°C），芯片就可能发热损坏。**

![image-20220601182108633](https://osmanmd.oss-cn-chengdu.aliyuncs.com/image-20220601182108633.png)

![image-20220601182157150](https://osmanmd.oss-cn-chengdu.aliyuncs.com/image-20220601182157150.png)

# 多种多样的运算放大器

ADI把放大器分为精密和告诉两大类。前者追求除高速外的各种指标，包括廉价。因此，精密运放未必处处精密。

电流反馈型运放，全差分运放都属于告诉运放

## 精密运放和高速运放

### 精密运放概述

一般来说，带宽小于50MHz的，能够具有某些特殊指标优异性的运放，都属于精密运放。

**op07**

极小的失调电压，30uV经典值，75uV最大值，且只有0.3uV/°C的温漂，0.3uV/month的时漂。

114dB的开环增益和123dB的共模抑制比。偏置电流只有1.2nA。

噪声只有10nV/(Hz)^0.5

具备很高的工作电压范围，一般可达36V，极限可达44V.

带宽较低，只有600kHz.

![image-20220602152932065](https://osmanmd.oss-cn-chengdu.aliyuncs.com/image-20220602152932065.png)

![image-20220602153019323](https://osmanmd.oss-cn-chengdu.aliyuncs.com/image-20220602153019323.png)

![image-20220602153038953](https://osmanmd.oss-cn-chengdu.aliyuncs.com/image-20220602153038953.png)

![image-20220602153150278](https://osmanmd.oss-cn-chengdu.aliyuncs.com/image-20220602153150278.png)

![image-20220602153300063](https://osmanmd.oss-cn-chengdu.aliyuncs.com/image-20220602153300063.png)

![image-20220602153333088](https://osmanmd.oss-cn-chengdu.aliyuncs.com/image-20220602153333088.png)

### 高速运放

![image-20220602153349301](https://osmanmd.oss-cn-chengdu.aliyuncs.com/image-20220602153349301.png)

![image-20220602153359018](https://osmanmd.oss-cn-chengdu.aliyuncs.com/image-20220602153359018.png)

### 查找满足条件的放大器

![image-20220602153547276](https://osmanmd.oss-cn-chengdu.aliyuncs.com/image-20220602153547276.png)

## 电流反馈型运算放大器（CFA)

其内部结构完全不同于电压反馈型（VFA，也就是传统的），导致其外部特性有所不同。

### 电流反馈型放大器的内核

CFA内部，正输入端是高阻输入的，等效于一个1倍增益的跟随器，跟随器输出和负输入端之间有一个小阻抗ZB，一般为即使欧姆。使得CFA的入端压差，演变为入端电流i，CFA以此电流作为控制元，镜像出以GND为基准的另一个电流i。此电流在内部流经一个很大的阻抗Z，又一次形成了电压iZ，带一个很小的输出阻抗ZO到输出端。

可以看出，CFA与VFA最大的区别在于夫输入端，CFA的负输入端是低阻的。

![image-20220602163833687](https://osmanmd.oss-cn-chengdu.aliyuncs.com/image-20220602163833687.png)

### 基本分析方法

![image-20220602164038041](https://osmanmd.oss-cn-chengdu.aliyuncs.com/image-20220602164038041.png)

![image-20220602164134731](https://osmanmd.oss-cn-chengdu.aliyuncs.com/image-20220602164134731.png)

### CFA和VFA传函对比

在不考虑频率特性的情况下，电流反馈放大器组成的负反馈电路，表现出与电压反馈放大器类似的性能。但是，当考虑频率特性时，电流反馈放大器就表现出了优异的性能。这来自于它奇妙的传函。

CDA内部影响频率特性的主要因素是Z，极大的Z必然存在并联的杂散电容C，因此

![image-20220602164408967](https://osmanmd.oss-cn-chengdu.aliyuncs.com/image-20220602164408967.png)

![image-20220602164519382](https://osmanmd.oss-cn-chengdu.aliyuncs.com/image-20220602164519382.png)

决定电流反馈型运放同相比例器性能的，主要源自两个重要因素：Rnew和C，前者主要取决于外部电阻配置，后者取决于运放本身性能。

![image-20220602165251171](https://osmanmd.oss-cn-chengdu.aliyuncs.com/image-20220602165251171.png)

![image-20220602165320662](https://osmanmd.oss-cn-chengdu.aliyuncs.com/image-20220602165320662.png)

![image-20220602165619059](https://osmanmd.oss-cn-chengdu.aliyuncs.com/image-20220602165619059.png)

CFA的电压增益变大时，其带宽减小并不明显，甚至可能出现高增益的带宽大于低增益带宽，传统的VFA中，这几乎是不可能的。

![image-20220602170800911](https://osmanmd.oss-cn-chengdu.aliyuncs.com/image-20220602170800911.png)

![image-20220602170818364](https://osmanmd.oss-cn-chengdu.aliyuncs.com/image-20220602170818364.png)

![image-20220602170826917](https://osmanmd.oss-cn-chengdu.aliyuncs.com/image-20220602170826917.png)

### 优缺点总结

电流反馈运放与电压反馈运放的主要区别为：

![image-20220602170923205](https://osmanmd.oss-cn-chengdu.aliyuncs.com/image-20220602170923205.png)

![image-20220602171440802](https://osmanmd.oss-cn-chengdu.aliyuncs.com/image-20220602171440802.png)

### ADI的电流反馈型放大器

![image-20220602171513218](https://osmanmd.oss-cn-chengdu.aliyuncs.com/image-20220602171513218.png)

## 全差分运算放大器

三个输入端两个输出端的运算放大器。英文为Differential Amplifier 或者Fully Differential Amplifier。与标准运放一样，也需要外部电阻配合形成负反馈才能实施放大功能。

### 全差分运算放大器概述

![image-20220602171929445](https://osmanmd.oss-cn-chengdu.aliyuncs.com/image-20220602171929445.png)

![image-20220602172153004](https://osmanmd.oss-cn-chengdu.aliyuncs.com/image-20220602172153004.png)

优点：

- 可以实现差分信号传递，进而抵抗外部共模干扰
- 在相同电源电压下，能够提供2倍的信号动态范围。
- 能够有效降低信号传递中的偶次谐波，减少失真

### 常见电路分析

#### 单端输入转差分输出

![image-20220602172905450](https://osmanmd.oss-cn-chengdu.aliyuncs.com/image-20220602172905450.png)

![image-20220602200907463](https://osmanmd.oss-cn-chengdu.aliyuncs.com/image-20220602200907463.png)

![image-20220602200944626](https://osmanmd.oss-cn-chengdu.aliyuncs.com/image-20220602200944626.png)

![image-20220602201032154](https://osmanmd.oss-cn-chengdu.aliyuncs.com/image-20220602201032154.png)

#### 含阻抗匹配的单端输入转差分输

![image-20220602201348116](https://osmanmd.oss-cn-chengdu.aliyuncs.com/image-20220602201348116.png)

![image-20220602201551493](https://osmanmd.oss-cn-chengdu.aliyuncs.com/image-20220602201551493.png)

![image-20220602201603286](https://osmanmd.oss-cn-chengdu.aliyuncs.com/image-20220602201603286.png)

![image-20220602201615784](https://osmanmd.oss-cn-chengdu.aliyuncs.com/image-20220602201615784.png)

![image-20220602201629234](https://osmanmd.oss-cn-chengdu.aliyuncs.com/image-20220602201629234.png)

#### 全差分运放的其他电路形式

全差分更多用于ADC驱动电路、单端差分转换。

具有更多的输入输出，组合更多。

但，生产复杂，较贵，且某些单项指标也比不过标准运放。

##### 全差分信号放大（差分进，差分出）

全差分放大器可以多级级联就，始终保持差分信号传递。

在低频信号链中，无需考虑信号端接中的线缆阻抗匹配。

可以直接耦合

![image-20220603114640935](https://osmanmd.oss-cn-chengdu.aliyuncs.com/image-20220603114640935.png)

也可以交流耦合（直接在链路中合适的位置串联电容）

高频全差信号传递中，一旦信号线过长或者使用传输线缆，则要考虑阻抗匹配以保持尽量小的反射。

![image-20220603115220420](https://osmanmd.oss-cn-chengdu.aliyuncs.com/image-20220603115220420.png)

RT，端接电阻，保证从包括它开始向右的输入阻抗为50Ω，以便在它的两端获得原信号的一般

##### 全差分仪表放大器

![image-20220603120545612](https://osmanmd.oss-cn-chengdu.aliyuncs.com/image-20220603120545612.png)

仪表放大器的特征：

- 差分输入，高输入阻抗
- 有电压放大能力，增益最好能方便调节

全差分仪表放大器与传统仪表放大器的唯一区别是，前者的输出是差分的，后者是单端。

图中实现一阶低通滤波器

##### 多种接法的全差分电路

![image-20220603121505423](https://osmanmd.oss-cn-chengdu.aliyuncs.com/image-20220603121505423.png)

可以尝试用全差分运放实现：

- 输入阻抗极高
- 同相输出衰减

### ADI的差分放大器

![image-20220603121641359](https://osmanmd.oss-cn-chengdu.aliyuncs.com/image-20220603121641359.png)

# 使用放大器的共性问题

## 放大器的封装

运放的封装，对整体电路板尺寸、焊接工艺和散热有影响，对电路性能也有影响。

常见错误：

- 管脚在肚子上，手工焊接实现不了
- 封装大小不对，焊不上
- 管脚定义不对。

**因为暂时不用AD绘制封装，暂且跳过**

**从P102跳到P115**

## 供电和电源去耦

给放大器提供良好的电源配置，使用好放大器的关键。

### 给放大器供电的几项注意

- 极性和大小
- 如果放大器有若干个内部相同的电源脚或地，也要全部接好
- 给电源对地配置电容
- 必要时在电源流进芯片的路径中串联磁珠

### 怎么给放大器电源配置电容

如果不配置合适地电容，看起来工作正常地放大电路，性能指标会严重下降。

电源对地之间增加地电容，分为两类，一类是库电容，另一类是旁路电容。

#### 库电容

是一个百uf的电解电容。

当负载出现突然地大电流需求，而电源一时不能提供如此大地电流输出，库电容防止输出电压跌落。

一般设计在电源进入电路板地入口处，距离用电运放距离不能太远

#### 旁路电容

一般是10uf\~0.1uf\~0.01uf的电容组，设计在芯片的电源管脚根部。

局部形成一个低通滤波器，用于”bypass"电源出现的高频电压噪声。

![image-20220603123209873](https://osmanmd.oss-cn-chengdu.aliyuncs.com/image-20220603123209873.png)

电容一般呈现“沟型”的阻抗曲线。在低频段，感抗和电阻都很小，随着频率的上升，电容容抗逐渐下降，总阻抗也是下降的。而随着频率的再升高，感抗开始起作用，使得总阻抗呈现上升趋势。

一般认为谷值点就是电容的等效串联电阻。频率为1/（2Π(LC)^0.5）

*一般认为，小容值电容器的等效电感会小些。*

不同大小，不同类型的电容器，等效电感和等效电阻不同，低阻抗覆盖区域也就不同。

使用两个不同溶质的电容器并联，会扩大其低阻抗频率区域，使得旁路作用在更宽的频域。

覆盖较为宽广的噪声频段，用一个较大的电容负责低频段，用一个较小的电容负责高频段，这两个电容的容值一般选为50倍到1000倍较好。

双电容旁路，常用于模拟电路芯片如运放等的电源旁路，常用的组合有10uf/0.1uf,4.7uf/0.01uf,10uf/0.01uf。

### 配置旁路电容器的注意事项

给模拟放大器电源脚配置旁路电容器，还要再PCB布线时注意

- 流经原则，电源先经过电容组，再进入电源管脚。

- 顺序原则：电源走线应先经过大电容，在经过小电容

- 就近原则：小电容应该无限靠近芯片电源脚根部，而大电容也应无限接近小电容。

- 共地原则：一个电容组的两个电容，其接地点必须是一个相同的地平面区域。

- 电源走线应该足够粗

- 不要节省电容

- 注意电解电容的极性和耐压问题。钽电容耐压不够，很容易烧毁

- 根据噪声分布不同，可能要考虑更换电容值。大电容再1uf\~10uf内,小电容在0.01uf\~0.1uf。是最常见的

  **为模拟电路的电源设计旁路电容，是重要的。**

## 不要忽视直流通路

### 为什么要给放大器提供直流通路

运放的入端是晶体管的基极或栅极。完全浮空下，晶体管是不会导通的。

任何一个晶体管要想正常工作，必须具有合适的静态工作点，也就是它必须有正常的直流通路，或者说它不能



















































































